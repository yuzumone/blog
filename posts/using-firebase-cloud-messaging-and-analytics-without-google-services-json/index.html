<!doctype html><html lang=ja-jp dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Using Firebase Cloud Messaging and Analytics without google-services.json | yuzumone's blog</title>
<meta name=description content="
    
  "><meta name=keywords content="
    
  "><style>@import 'https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+JP:wght@400;600&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Noto+Color+Emoji&family=Secular+One&display=swap'</style><link rel=stylesheet href=/css/main.min.c920c6820985c10fbbdc90a35fcfbbe126b074dade8529dee052ec789f76adaa.css integrity="sha256-ySDGggmFwQ+73JCjX8+74SawdNrehSne4FLseJ92rao=" crossorigin=anonymous><style>.bg{background-color:#f8f8f8}.chroma{background-color:#f8f8f8}.chroma .x{color:#000}.chroma .err{color:#a40000}.chroma .cl{}.chroma .lnlinks{outline:none;text-decoration:none;color:inherit}.chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.chroma .lntable{border-spacing:0;padding:0;margin:0;border:0}.chroma .hl{background-color:#dfdfdf}.chroma .lnt{white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .ln{white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .line{display:flex}.chroma .k{color:#204a87;font-weight:700}.chroma .kc{color:#204a87;font-weight:700}.chroma .kd{color:#204a87;font-weight:700}.chroma .kn{color:#204a87;font-weight:700}.chroma .kp{color:#204a87;font-weight:700}.chroma .kr{color:#204a87;font-weight:700}.chroma .kt{color:#204a87;font-weight:700}.chroma .n{color:#000}.chroma .na{color:#c4a000}.chroma .nb{color:#204a87}.chroma .bp{color:#3465a4}.chroma .nc{color:#000}.chroma .no{color:#000}.chroma .nd{color:#5c35cc;font-weight:700}.chroma .ni{color:#ce5c00}.chroma .ne{color:#c00;font-weight:700}.chroma .nf{color:#000}.chroma .fm{color:#000}.chroma .nl{color:#f57900}.chroma .nn{color:#000}.chroma .nx{color:#000}.chroma .py{color:#000}.chroma .nt{color:#204a87;font-weight:700}.chroma .nv{color:#000}.chroma .vc{color:#000}.chroma .vg{color:#000}.chroma .vi{color:#000}.chroma .vm{color:#000}.chroma .l{color:#000}.chroma .ld{color:#000}.chroma .s{color:#4e9a06}.chroma .sa{color:#4e9a06}.chroma .sb{color:#4e9a06}.chroma .sc{color:#4e9a06}.chroma .dl{color:#4e9a06}.chroma .sd{color:#8f5902;font-style:italic}.chroma .s2{color:#4e9a06}.chroma .se{color:#4e9a06}.chroma .sh{color:#4e9a06}.chroma .si{color:#4e9a06}.chroma .sx{color:#4e9a06}.chroma .sr{color:#4e9a06}.chroma .s1{color:#4e9a06}.chroma .ss{color:#4e9a06}.chroma .m{color:#0000cf;font-weight:700}.chroma .mb{color:#0000cf;font-weight:700}.chroma .mf{color:#0000cf;font-weight:700}.chroma .mh{color:#0000cf;font-weight:700}.chroma .mi{color:#0000cf;font-weight:700}.chroma .il{color:#0000cf;font-weight:700}.chroma .mo{color:#0000cf;font-weight:700}.chroma .o{color:#ce5c00;font-weight:700}.chroma .ow{color:#204a87;font-weight:700}.chroma .p{color:#000;font-weight:700}.chroma .c{color:#8f5902;font-style:italic}.chroma .ch{color:#8f5902;font-style:italic}.chroma .cm{color:#8f5902;font-style:italic}.chroma .c1{color:#8f5902;font-style:italic}.chroma .cs{color:#8f5902;font-style:italic}.chroma .cp{color:#8f5902;font-style:italic}.chroma .cpf{color:#8f5902;font-style:italic}.chroma .g{color:#000}.chroma .gd{color:#a40000}.chroma .ge{color:#000;font-style:italic}.chroma .gr{color:#ef2929}.chroma .gh{color:navy;font-weight:700}.chroma .gi{color:#00a000}.chroma .go{color:#000;font-style:italic}.chroma .gp{color:#8f5902}.chroma .gs{color:#000;font-weight:700}.chroma .gu{color:purple;font-weight:700}.chroma .gt{color:#a40000;font-weight:700}.chroma .gl{color:#000;text-decoration:underline}.chroma .w{color:#f8f8f8;text-decoration:underline}</style><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js></script><script src=/js/search.942bd26f5f9a4a6909fc6fe8467bf5e63314ad56a308f6cf706af97ea3b80f27.js integrity="sha256-lCvSb1+aSmkJ/G/oRnv15jMUrVajCPbPcGr5fqO4Dyc=" crossorigin=anonymous></script></head><body><article class=posts><header><div class=header-container><div class=flex-none><h1 class=title><a href=https://blog.yuzumone.net/>yuzumone's blog</a></h1></div><nav><ul class=flex-items><li class=header-item><a href=/>Home</a></li><li class=header-item><a href=/archives/>Archives</a></li></ul></nav></div><div class=header-line></div></header><main><div><h1 class=article-title>Using Firebase Cloud Messaging and Analytics without google-services.json</h1><div class=header-container><time datetime=2018-08-04T00:00:00+00:00>üóì August 4, 2018</time><div class=article-tag><p class=flex-items>üè∑Ô∏è</p><ul class=flex-items><li class=header-item><a href=/tags/android>Android</a></li></ul></div></div></div><div><figure><img src="https://images.unsplash.com/photo-1581051357242-e92ba4df7790?w=800&amp;auto=format&amp;fit=crop&amp;q=60&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fGZpcmViYXNlfGVufDB8fDB8fHwy"><figcaption><h4>Photo by Daniel Sturgess on Unsplash</h4></figcaption></figure><h2 id=„Ç§„Ç±„Å¶„Å™„ÅÑ>„Ç§„Ç±„Å¶„Å™„ÅÑ</h2><ul><li>GitHub „Å´‰∏ä„Åí„Çå„Å™„ÅÑ„ÅÆ„Åß CI/CD „Åó„Çà„ÅÜ„Å®ÊÄù„Å£„Åü„Å®„Åç„ÇÅ„Çì„Å©„Åè„Åï„ÅÑ<br></li><li>apply plugin: ‚Äòcom.google.gms.google-services‚Äô „Çí app/build.gradle „ÅÆ 1 Áï™‰∏ã„Å´Êõ∏„ÅèÂøÖË¶Å„Åå„ÅÇ„Çã<br></li><li>FCM „Å® com.google.gms.google-services „ÅÆ‰ª≤„ÅåÊÇ™„ÅÑÔºà„Çâ„Åó„ÅÑÔºâ<br></li></ul><p>„Å®„ÅÑ„ÅÜ„Åì„Å®„ÅßÁí∞Â¢ÉÂ§âÊï∞„Å´ APP_ID „Å™„Å©„ÇíË®≠ÂÆö„Åó„Å¶ FCM „Å® Analytics „Çí‰Ωø„ÅÜÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶Êõ∏„ÅÑ„Å¶„ÅÑ„Åç„Åæ„ÅôÔºé<br></p><h2 id=fcm>FCM</h2><p>root „ÅÆ build.gradleÔºà„Åì„Çå„ÅØÂÖ¨Âºè„ÅÆ„ÇÑ„Å§„Å®Â§â„Çè„Çâ„Å™„ÅÑÔºâ<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gradle data-lang=gradle><span class=line><span class=cl><span class=n>buildscript</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ext</span><span class=o>.</span><span class=na>kotlin_version</span> <span class=o>=</span> <span class=s1>&#39;1.2.51&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>repositories</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>google</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=n>jcenter</span><span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>dependencies</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>classpath</span> <span class=s1>&#39;com.android.tools.build:gradle:3.1.3&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>classpath</span> <span class=s1>&#39;com.google.gms:google-services:3.2.0&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>classpath</span> <span class=s2>&#34;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1>// NOTE: Do not place your application dependencies here; they belong
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// in the individual module build.gradle files
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span><span class=n>allprojects</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>repositories</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>google</span><span class=o>()</span>
</span></span><span class=line><span class=cl>        <span class=n>jcenter</span><span class=o>()</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>app/build.gradle<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gradle data-lang=gradle><span class=line><span class=cl><span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;com.android.application&#39;</span>
</span></span><span class=line><span class=cl><span class=n>apply</span> <span class=nl>plugin:</span> <span class=s1>&#39;kotlin-android&#39;</span><span class=n>android</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>compileSdkVersion</span> <span class=mi>27</span>
</span></span><span class=line><span class=cl>    <span class=n>defaultConfig</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>applicationId</span> <span class=s2>&#34;net.yuzumone.test&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>minSdkVersion</span> <span class=mi>21</span>
</span></span><span class=line><span class=cl>        <span class=n>targetSdkVersion</span> <span class=mi>27</span>
</span></span><span class=line><span class=cl>        <span class=n>versionCode</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=n>versionName</span> <span class=s2>&#34;1.0&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>buildConfigField</span><span class=o>(</span><span class=s2>&#34;String&#34;</span><span class=o>,</span> <span class=s2>&#34;APP_ID&#34;</span><span class=o>,</span> <span class=s2>&#34;\&#34;${System.env.FCM_APP_ID}\&#34;&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=n>buildConfigField</span><span class=o>(</span><span class=s2>&#34;String&#34;</span><span class=o>,</span> <span class=s2>&#34;API_KEY&#34;</span><span class=o>,</span> <span class=s2>&#34;\&#34;${System.env.FCM_API_KEY}\&#34;&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>buildTypes</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>release</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>minifyEnabled</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>            <span class=n>proguardFiles</span> <span class=nf>getDefaultProguardFile</span><span class=o>(</span><span class=s1>&#39;proguard-android.txt&#39;</span><span class=o>),</span> <span class=s1>&#39;proguard-rules.pro&#39;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=n>dependencies</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>implementation</span> <span class=nf>fileTree</span><span class=o>(</span><span class=nl>dir:</span> <span class=s1>&#39;libs&#39;</span><span class=o>,</span> <span class=nl>include:</span> <span class=o>[</span><span class=s1>&#39;*.jar&#39;</span><span class=o>])</span>
</span></span><span class=line><span class=cl>    <span class=n>implementation</span><span class=s2>&#34;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>implementation</span> <span class=s1>&#39;com.android.support:appcompat-v7:27.1.1&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>implementation</span> <span class=s1>&#39;com.google.firebase:firebase-messaging:17.1.0&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>Application<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl><span class=k>class</span> <span class=nc>TestApplication</span> <span class=p>:</span> <span class=n>Application</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>override</span> <span class=k>fun</span> <span class=nf>onCreate</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>super</span><span class=p>.</span><span class=n>onCreate</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nc>FirebaseApp</span><span class=p>.</span><span class=n>initializeApp</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=nc>FirebaseOptions</span><span class=p>.</span><span class=n>Builder</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=p>.</span><span class=n>setApplicationId</span><span class=p>(</span><span class=nc>BuildConfig</span><span class=p>.</span><span class=n>APP_ID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>.</span><span class=n>setApiKey</span><span class=p>(</span><span class=nc>BuildConfig</span><span class=p>.</span><span class=n>API_KEY</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>.</span><span class=n>build</span><span class=p>(),</span> <span class=n>getString</span><span class=p>(</span><span class=nc>R</span><span class=p>.</span><span class=n>string</span><span class=p>.</span><span class=n>app_name</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>„Éù„Ç§„É≥„Éà<br></p><ul><li>buildConfigField „Çí‰ΩøÁî®„Åó„Å¶Áí∞Â¢ÉÂ§âÊï∞„Åã„Çâ BuildConfig „Å∏ APP_ID „ÇíË™≠„ÅøËæº„ÇÄ<br></li><li>Application „ÇØ„É©„Çπ„Åß FirebaseApp#initializeApp „ÇíÂëº„Å≥ÔºåAPP_ID „Å® API_KEY „ÇíÂÖ•„Çå„Çã<br></li></ul><p>„Åì„Çå„Å†„Åë„Åß„Å®„Çä„ÅÇ„Åà„Åö FCM „ÅØ‰Ωø„Åà„Çã„Çà„ÅÜ„Å´„Å™„ÇãÔºé<br>Áí∞Â¢ÉÂ§âÊï∞„Å´ÂÄ§„ÇíË®≠ÂÆö„Åô„Çã„ÅÆ„ÇíÂøò„Çå„Åö„Å´Ôºé<br></p><h2 id=analytics>Analytics</h2><p>FCM „Å´„ÇÇ„ÅÆ„Å´ËøΩÂä†„ÅßË®≠ÂÆö„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„ÇãÔºé<br></p><p>app/build.gradle<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gradle data-lang=gradle><span class=line><span class=cl><span class=n>android</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>defaultConfig</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// ËøΩÂä†
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>resValue</span><span class=o>(</span><span class=s2>&#34;string&#34;</span><span class=o>,</span> <span class=s2>&#34;google_app_id&#34;</span><span class=o>,</span> <span class=s2>&#34;\&#34;${System.env.FCM_APP_ID}\&#34;&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=n>dependencies</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ËøΩÂä†
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>implementation</span> <span class=s1>&#39;com.google.firebase:firebase-analytics:16.0.1&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>‰∏ä„Å´Á§∫„Åó„Å¶„ÅÑ„ÇãÈÄö„ÇäÔºåAnalytics „Çí‰Ωø„ÅÜ„Å´„ÅØ string.xml „Å´ google_app_id „Å®„ÅÑ„ÅÜ name „Åß APP_ID „ÇíËøΩÂä†„ÅßË®≠ÂÆö„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„ÇãÔºé<br>string.xml „Å´Áõ¥„ÅßÊõ∏„Åè„Å®ÊÑèÂë≥„Åå„Å™„ÅÑ„ÅÆ„ÅßÔºåresValue „Çí‰ΩøÁî®„Åó„Å¶ string.xml „Å´ÂÄ§„Çí„Çª„ÉÉ„Éà„Åô„Çã„Çà„ÅÜ„Å´„Åó„Å¶„Åø„ÅüÔºé<br>„Å®„Çä„ÅÇ„Åà„Åö„Åì„Çå„Åß„Ç®„É©„Éº„ÅåÂá∫„Å™„Åè„Å™„Å£„Åü„ÅÆ„Åß OK „Å£„ÅΩ„ÅÑÔºé<br></p></div></main><footer><section><p>¬© 2025 yuzumone's blog All rights reserved.</p></section></footer></article></body></html>