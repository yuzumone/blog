<!doctype html><html lang=ja-jp dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Arch Linux Install Battle | yuzumone's blog</title>
<meta name=description content="
    
  "><meta name=keywords content="
    
  "><meta name=Hatena::Bookmark content="nocomment"><style>@import 'https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+JP:wght@400;600&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Noto+Color+Emoji&family=Secular+One&display=swap'</style><link rel=stylesheet href=/css/main.min.2421e6cca60bf0bd0ce22a86e5391b0a7b5bbd939bf4e3d651fd3384307eba3b.css integrity="sha256-JCHmzKYL8L0M4iqG5TkbCntbvZOb9OPWUf0zhDB+ujs=" crossorigin=anonymous><style>.bg{background-color:#f8f8f8}.chroma{background-color:#f8f8f8}.chroma .x{color:#000}.chroma .err{color:#a40000}.chroma .cl{}.chroma .lnlinks{outline:none;text-decoration:none;color:inherit}.chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.chroma .lntable{border-spacing:0;padding:0;margin:0;border:0}.chroma .hl{background-color:#dfdfdf}.chroma .lnt{white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .ln{white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .line{display:flex}.chroma .k{color:#204a87;font-weight:700}.chroma .kc{color:#204a87;font-weight:700}.chroma .kd{color:#204a87;font-weight:700}.chroma .kn{color:#204a87;font-weight:700}.chroma .kp{color:#204a87;font-weight:700}.chroma .kr{color:#204a87;font-weight:700}.chroma .kt{color:#204a87;font-weight:700}.chroma .n{color:#000}.chroma .na{color:#c4a000}.chroma .nb{color:#204a87}.chroma .bp{color:#3465a4}.chroma .nc{color:#000}.chroma .no{color:#000}.chroma .nd{color:#5c35cc;font-weight:700}.chroma .ni{color:#ce5c00}.chroma .ne{color:#c00;font-weight:700}.chroma .nf{color:#000}.chroma .fm{color:#000}.chroma .nl{color:#f57900}.chroma .nn{color:#000}.chroma .nx{color:#000}.chroma .py{color:#000}.chroma .nt{color:#204a87;font-weight:700}.chroma .nv{color:#000}.chroma .vc{color:#000}.chroma .vg{color:#000}.chroma .vi{color:#000}.chroma .vm{color:#000}.chroma .l{color:#000}.chroma .ld{color:#000}.chroma .s{color:#4e9a06}.chroma .sa{color:#4e9a06}.chroma .sb{color:#4e9a06}.chroma .sc{color:#4e9a06}.chroma .dl{color:#4e9a06}.chroma .sd{color:#8f5902;font-style:italic}.chroma .s2{color:#4e9a06}.chroma .se{color:#4e9a06}.chroma .sh{color:#4e9a06}.chroma .si{color:#4e9a06}.chroma .sx{color:#4e9a06}.chroma .sr{color:#4e9a06}.chroma .s1{color:#4e9a06}.chroma .ss{color:#4e9a06}.chroma .m{color:#0000cf;font-weight:700}.chroma .mb{color:#0000cf;font-weight:700}.chroma .mf{color:#0000cf;font-weight:700}.chroma .mh{color:#0000cf;font-weight:700}.chroma .mi{color:#0000cf;font-weight:700}.chroma .il{color:#0000cf;font-weight:700}.chroma .mo{color:#0000cf;font-weight:700}.chroma .o{color:#ce5c00;font-weight:700}.chroma .ow{color:#204a87;font-weight:700}.chroma .p{color:#000;font-weight:700}.chroma .c{color:#8f5902;font-style:italic}.chroma .ch{color:#8f5902;font-style:italic}.chroma .cm{color:#8f5902;font-style:italic}.chroma .c1{color:#8f5902;font-style:italic}.chroma .cs{color:#8f5902;font-style:italic}.chroma .cp{color:#8f5902;font-style:italic}.chroma .cpf{color:#8f5902;font-style:italic}.chroma .g{color:#000}.chroma .gd{color:#a40000}.chroma .ge{color:#000;font-style:italic}.chroma .gr{color:#ef2929}.chroma .gh{color:navy;font-weight:700}.chroma .gi{color:#00a000}.chroma .go{color:#000;font-style:italic}.chroma .gp{color:#8f5902}.chroma .gs{color:#000;font-weight:700}.chroma .gu{color:purple;font-weight:700}.chroma .gt{color:#a40000;font-weight:700}.chroma .gl{color:#000;text-decoration:underline}.chroma .w{color:#f8f8f8;text-decoration:underline}</style><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js></script><script src=/js/search.942bd26f5f9a4a6909fc6fe8467bf5e63314ad56a308f6cf706af97ea3b80f27.js integrity="sha256-lCvSb1+aSmkJ/G/oRnv15jMUrVajCPbPcGr5fqO4Dyc=" crossorigin=anonymous></script></head><body><article class=posts><header><div class=header-container><div class=flex-none><h1 class=title><a href=https://blog.yuzumone.net/>yuzumone's blog</a></h1></div><nav><ul class=flex-items><li class=header-item><a href=/>Home</a></li><li class=header-item><a href=/archives/>Archives</a></li></ul></nav></div><div class=header-line></div></header><main><div><h1 class=article-title>Arch Linux Install Battle</h1><div class=header-container><time datetime=2024-02-11T00:00:00+00:00>ğŸ—“ February 11, 2024</time><div class=article-tag><p class=flex-items>ğŸ·ï¸</p><ul class=flex-items><li class=header-item><a href=/tags/linux>Linux</a></li></ul></div></div><details class=page-toc><summary>Table of Contents</summary><nav id=TableOfContents><ul><li><a href=#environment>Environment</a></li><li><a href=#ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š</a></li><li><a href=#ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®ä½œæˆ>ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®ä½œæˆ</a></li><li><a href=#ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ>ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ</a></li><li><a href=#ãƒã‚¦ãƒ³ãƒˆ>ãƒã‚¦ãƒ³ãƒˆ</a></li><li><a href=#ãƒŸãƒ©ãƒ¼å¤‰æ›´>ãƒŸãƒ©ãƒ¼å¤‰æ›´</a></li><li><a href=#å¿…é ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«>å¿…é ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></li><li><a href=#fstab>fstab</a></li><li><a href=#chroot>chroot</a></li><li><a href=#ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³>ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³</a></li><li><a href=#ãƒ­ãƒ¼ã‚«ãƒªã‚¼ãƒ¼ã‚·ãƒ§ãƒ³>ãƒ­ãƒ¼ã‚«ãƒªã‚¼ãƒ¼ã‚·ãƒ§ãƒ³</a></li><li><a href=#ãƒ›ã‚¹ãƒˆãƒãƒ¼ãƒ >ãƒ›ã‚¹ãƒˆãƒãƒ¼ãƒ </a></li><li><a href=#initramfs>Initramfs</a></li><li><a href=#root-ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰>Root ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</a></li><li><a href=#ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼>ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼</a></li><li><a href=#shutdown>shutdown</a></li><li><a href=#æ”¹ã‚ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶š>æ”¹ã‚ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶š</a></li><li><a href=#ãƒ¦ãƒ¼ã‚¶ä½œæˆ>ãƒ¦ãƒ¼ã‚¶ä½œæˆ</a></li><li><a href=#pacman-å‘¨ã‚Š>Pacman å‘¨ã‚Š</a></li><li><a href=#ssd>SSD</a></li><li><a href=#yay>yay</a></li></ul></nav></details></div><div><figure><img src="https://images.unsplash.com/photo-1577998555981-6e798325914e?w=800&amp;auto=format&amp;fit=crop&amp;q=60&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwcm9maWxlLXBhZ2V8MTB8fHxlbnwwfHx8fHw%3D"><figcaption><h4>Photo by svklimkin on Unsplash</h4></figcaption></figure><p>grub ã‹ã‚‰ systemd-boot ã«ã—ãŸã„ãªãã¨æ€ã£ã¦ã„ã¦ï¼Œã©ã†ã›ãªã‚‰ç¶ºéº—ã«ã™ã‚‹ã‹ã¨ã„ã†ã“ã¨ã§<br></p><h2 id=environment>Environment</h2><ul><li>Surface Pro<br></li><li>Type Cover Keyboard (US)<br></li></ul><h2 id=ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š</h2><p>WiFi ã§ã‚„ã£ã¦ã„ã<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ip link <span class=nb>set</span> wlan0 up
</span></span><span class=line><span class=cl>wpa_supplicant -B -i wlan0 -c &lt;<span class=o>(</span>wpa_passphrase SSID password<span class=o>)</span>
</span></span><span class=line><span class=cl>dhcpcd
</span></span></code></pre></div><h2 id=ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®ä½œæˆ>ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®ä½œæˆ</h2><p>gdisk ã¨æ€ã£ãŸã‚‰æœ€è¿‘ã¯ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§ã„ã‘ã‚‹ã‚‰ã—ã„<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sgdisk -z /dev/sda
</span></span><span class=line><span class=cl>sgdisk -n 1:0:+512M -t 1:ef00 -c 1:<span class=s2>&#34;EFI System&#34;</span> /dev/sda
</span></span><span class=line><span class=cl>sgdisk -n 2:0: -t 2:8300 -c 2:<span class=s2>&#34;Linux filesystem&#34;</span> /dev/sda
</span></span></code></pre></div><h2 id=ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ>ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkfs.fat -F32 /dev/sda1
</span></span><span class=line><span class=cl>mkfs.ext4 /dev/sda2
</span></span></code></pre></div><h2 id=ãƒã‚¦ãƒ³ãƒˆ>ãƒã‚¦ãƒ³ãƒˆ</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mount /dev/sda2 /mnt
</span></span><span class=line><span class=cl>mkdir -p /mnt/boot
</span></span><span class=line><span class=cl>mount /dev/sda1 /mnt/boot
</span></span></code></pre></div><h2 id=ãƒŸãƒ©ãƒ¼å¤‰æ›´>ãƒŸãƒ©ãƒ¼å¤‰æ›´</h2><p>ã‚ã¨ã‚ã¨ reflector ã§è‰¯ã„æ„Ÿã˜ã«ã™ã‚‹ã¨ã—ã¦é©å½“ãªæ—¥æœ¬ã®ã‚„ã¤ã‚’ä¸Šã«æ›¸ã„ã¦ãŠã<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vim /etc/pacman.d/mirrorlist
</span></span><span class=line><span class=cl><span class=nv>Server</span> <span class=o>=</span> http://ftp.jaist.ac.jp/pub/Linux/ArchLinux/<span class=nv>$repo</span>/os/<span class=nv>$arch</span>
</span></span></code></pre></div><h2 id=å¿…é ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«>å¿…é ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2><p>ã©ã†ã›ã„ã‚Œã‚‹ã‚„ã¤ã¯ã“ã®æ®µéšã§ã„ã‚Œã¡ã‚ƒã†<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pacstrap -K /mnt base base-devel linux linux-firmware linux-firmware-marvell <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  intel-ucode efibootmgr dosfstools netctl vim <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  iw wpa_supplicant networkmanager
</span></span></code></pre></div><h2 id=fstab>fstab</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</span></span></code></pre></div><h2 id=chroot>chroot</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arch-chroot /mnt
</span></span></code></pre></div><h2 id=ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³>ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ln -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime
</span></span><span class=line><span class=cl>hwclock --systohc
</span></span></code></pre></div><h2 id=ãƒ­ãƒ¼ã‚«ãƒªã‚¼ãƒ¼ã‚·ãƒ§ãƒ³>ãƒ­ãƒ¼ã‚«ãƒªã‚¼ãƒ¼ã‚·ãƒ§ãƒ³</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vim /etc/locale.gen
</span></span><span class=line><span class=cl><span class=c1># en_US.UTF-8 UTF-8 ã‚’ã‚¢ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆ</span>
</span></span><span class=line><span class=cl>locale-gen
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;LANG=en_US.UTF-8&#34;</span> &gt; /etc/locale.conf
</span></span></code></pre></div><h2 id=ãƒ›ã‚¹ãƒˆãƒãƒ¼ãƒ >ãƒ›ã‚¹ãƒˆãƒãƒ¼ãƒ </h2><p>ã¿ã‚“ãªã©ã‚“ãª hostname ã«ã—ã¦ã„ã‚‹ã®ã‹æ°—ã«ãªã‚‹<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;hostname&#34;</span> &gt; /etc/hostname
</span></span></code></pre></div><h2 id=initramfs>Initramfs</h2><p>ã‚«ãƒ¼ãƒãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã¨ãã« mkinitcpio ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€æ™®é€šã¯æ–°ã—ã„ initramfs ã®ä½œæˆã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ï¼Œã¨ã®ã“ã¨ã ãŒä¸€å¿œã‚„ã£ã¦ãŠã<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkinitcpio -P
</span></span></code></pre></div><h2 id=root-ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰>Root ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>passwd
</span></span></code></pre></div><h2 id=ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼>ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼</h2><p>Secure boot ã¯ã©ã£ã‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã‚„ã‚ŠãŸã„<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>bootctl install
</span></span></code></pre></div><p>è¨­å®šã¯ /boot/loader/loader.conf<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>default arch.conf
</span></span><span class=line><span class=cl>timeout 3
</span></span><span class=line><span class=cl>console-mode keep
</span></span><span class=line><span class=cl>editor no
</span></span></code></pre></div><p>ãƒ­ãƒ¼ãƒ€ã®è¿½åŠ ã¯ /boot/loader/entries/arch.conf ã¨ã—ã¾ã™<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>title   Arch Linux
</span></span><span class=line><span class=cl>linux   /vmlinuz-linux
</span></span><span class=line><span class=cl>initrd  /intel-ucode.img
</span></span><span class=line><span class=cl>initrd  /initramfs-linux.img
</span></span><span class=line><span class=cl>options root=/dev/sda2 rw
</span></span></code></pre></div><p>systemd-boot ã®å®šæœŸæ›´æ–°ã‚’æœ‰åŠ¹ã«ã—ã¦ãŠã<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl <span class=nb>enable</span> systemd-boot-update
</span></span></code></pre></div><h2 id=shutdown>shutdown</h2><p>USB ãƒ¡ãƒ¢ãƒªã‚’æŠœãã®ã‚’å¿˜ã‚Œãªã„<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>exit</span>
</span></span><span class=line><span class=cl>shutdown -h now
</span></span></code></pre></div><h2 id=æ”¹ã‚ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶š>æ”¹ã‚ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶š</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl start NetworkManager
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> NetworkManager
</span></span><span class=line><span class=cl>nmctl d wifi connect SSID password password
</span></span></code></pre></div><h2 id=ãƒ¦ãƒ¼ã‚¶ä½œæˆ>ãƒ¦ãƒ¼ã‚¶ä½œæˆ</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>useradd -m -g wheel -d /home/yuzumone -m yuzumone
</span></span><span class=line><span class=cl>passwd yuzumone
</span></span><span class=line><span class=cl>visudo  <span class=c1># ã„ã¤ã‚‚ã®ã‚„ã¤ã‚’ã‚¢ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆ</span>
</span></span></code></pre></div><h2 id=pacman-å‘¨ã‚Š>Pacman å‘¨ã‚Š</h2><p>pacman<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo vim /etc/pacman.conf
</span></span><span class=line><span class=cl><span class=c1># ParallelDownloads = 5 ã¨ Color ã‚’ã‚¢ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆ</span>
</span></span></code></pre></div><p>reflector<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pacman -S reflector
</span></span><span class=line><span class=cl>sudo reflector --country Japan,Australia
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> reflector.timer
</span></span></code></pre></div><p>paccache<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pacman -S pacman-contrib
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> paccache.timer
</span></span></code></pre></div><h2 id=ssd>SSD</h2><p>æ¯é€± TRIM ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹<br></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> fstrim.timer
</span></span></code></pre></div><h2 id=yay>yay</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://aur.archlinux.org/yay.git
</span></span><span class=line><span class=cl><span class=nb>cd</span> yay
</span></span><span class=line><span class=cl>makepkg -si
</span></span></code></pre></div><p>GUI ã¯ sway + lightdm ã§è¨­å®š<br></p></div></main><footer><section><p>Â© 2025 yuzumone's blog All rights reserved.</p></section></footer></article></body></html>